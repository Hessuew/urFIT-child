---
import imgScholarGPS from '~/assets/images/principalInvestigator/andrew-agbaje-arterial-stiffness-scholar-ranking.webp';
import imgEASO_NovoNordisk from '~/assets/images/principalInvestigator/andrew-agbaje-easo-novo-nordisk-award-2024.webp';
import imgFESC from '~/assets/images/principalInvestigator/andrew-agbaje-fesc-induction-ceremony-london-2024.webp';
import imgPortmourth2 from '~/assets/images/principalInvestigator/andrew-agbaje-phd-award-to-god-be-the-glory.webp';
import imgPortmourth from '~/assets/images/principalInvestigator/andrew-agbaje-phd-ceremony-university-of-portsmouth.webp';
import imgScholarGPSSpecialties from '~/assets/images/principalInvestigator/andrew-agbaje-scholargps-impact-arterial-stiffness.webp';
import imgFescLondon from '~/assets/images/principalInvestigator/andrew-agbaje-top-reviewer-esc-congress-2024.webp';
import imgAndrew from '~/assets/images/principalInvestigator/andrew-agbaje-university-of-portsmouth-campus.webp';
import GradientText from '~/components/ui/GradientText.astro';
import Hero from '~/components/widgets/Hero.astro';
import Spacer from '~/components/widgets/Spacer.astro';
import { ENDPOINTS } from '~/config/endpoints';
import {
  academicAchievements,
  academicAppointments,
  fellowshipsAndPositions,
  pastAwards,
  recentAwards2024,
  recentAwards2025,
} from '~/data/awardsAndHonours';
import Features2 from '../Features2.astro';
import Features5 from '../Features5.astro';
---

<Features2
  id="awards-and-honours"
  tagline="Awards and Honours"
  title="Andrew Agbaje | Prof. Andrew O. Agbaje upholds a legacy of excellence"
  classes={{ container: 'max-w-7xl xl:max-w-[1280px] mx-auto pb-0 md:pb-0 lg:pb-0 xl:pb-0' }}
>
  <Fragment slot="subtitle">
    <!-- Biblical Quote Section -->
    <div
      class="max-w-4xl xl:max-w-[896px] mx-auto bg-gray-50 dark:bg-slate-900 p-6 xl:p-[24px] rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
    >
      <p class="text-base xl:text-[16px] xl:leading-[24px] text-gray-700 dark:text-gray-300 italic">
        <GradientText class="font-bold">O how love I thy law!</GradientText> it is my meditation all the day. Thou through
        thy commandments hast made me wiser than mine enemies: for they are ever with me.
        <GradientText class="font-bold">I have more understanding than all my teachers:</GradientText>
        for thy testimonies are my meditation.
        <GradientText class="font-bold">I understand more than the ancients</GradientText>, because I keep thy precepts.
      </p>
      <p class="text-right mt-2 xl:mt-[8px] text-sm xl:text-[14px] xl:leading-[20px] text-gray-600 dark:text-gray-400">
        — Psalm 119:97–100
      </p>
    </div>

    <br />

    <!-- Introduction Text -->
    <p
      class="max-w-4xl xl:max-w-[896px] mx-auto text-lg xl:text-[20px] xl:leading-[28px] text-gray-700 dark:text-gray-300 intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
    >
      The research group urFIT-child and its principal investigator, Andrew Agbaje, have received recognition from
      numerous professional boards, academic institutions, and global media outlets.
    </p>

    <br />
    <br />
    <!-- Recent Awards 2025 -->
    <h2
      class="text-center text-2xl xl:text-[24px] xl:leading-[32px] font-bold text-gray-900 dark:text-white mb-6 xl:mb-[24px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
    >
      Recent Awards & Recognition (2025)
    </h2>
  </Fragment>
</Features2>

<!-- Recent Awards 2025 -->
<Features2
  classes={{ container: 'max-w-7xl xl:max-w-[1280px] mx-auto pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  columns={3}
  items={recentAwards2025.map((item) => ({
    title: item.title,
    icon: item.icon,
    description: `${item.subtitle}
                 ${item.details ? `<div class="text-base xl:text-[16px] xl:leading-[24px] text-primary mt-2 xl:mt-[8px]">${item.details}</div>` : ''}
                 ${item.location ? `<br /><br />${item.location}` : ''}`,
  }))}
/>

<!-- Awards 2024 -->
<h2
  class="text-center text-2xl xl:text-[24px] xl:leading-[32px] font-bold text-gray-900 dark:text-white mb-6 xl:mb-[24px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
>
  Awards & Recognition (2024)
</h2>

<!-- Awards 2024 -->
<Features2
  classes={{ container: 'max-w-7xl xl:max-w-[1280px] mx-auto pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  columns={3}
  items={recentAwards2024.map((item) => ({
    title: item.title,
    icon: item.icon,
    description: `${item.subtitle}
                 ${item.details ? `<div class="text-base xl:text-[16px] xl:leading-[24px] text-primary mt-2 xl:mt-[8px]">${item.details}</div>` : ''}
                 ${item.location ? `<br /><br />${item.location}` : ''}`,
  }))}
/>

<div class="flex flex-col lg:flex-row relative max-w-7xl xl:max-w-[1280px] mx-auto px-0 lg:px-6 xl:px-[24px] gap-1">
  <Hero
    classes={{ labelContainer: 'pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
    image={{
      src: imgScholarGPS,
      alt: 'Prof. Andrew Agbaje ranked 3rd globally in arterial stiffness research – ScholarGPS 2024',
      objectPosition: 'center',
      class: 'border rounded-lg',
    }}
    imageText="Prof. Andrew Agbaje listed as the 3rd leading scholar in arterial stiffness research."
  />
  <Hero
    classes={{ labelContainer: 'pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
    image={{
      src: imgScholarGPSSpecialties,
      alt: 'Prof. Andrew Agbaje’s impact in arterial stiffness research over the past 5 years.',
      objectPosition: 'top',
      class: 'border rounded-lg',
    }}
    imageText="ScholarGPS recognition of Prof. Andrew Agbaje’s impact in arterial stiffness research."
  />
</div>

<Hero
  classes={{ labelContainer: 'pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  image={{
    src: imgEASO_NovoNordisk,
    alt: 'EASO–Novo Nordisk Award 2024 presented to Prof. Andrew Agbaje',
    objectPosition: 'top',
  }}
  imageText="Prof. Andrew Agbaje receives the EASO–Novo Nordisk Award 2024 for outstanding research contributions."
/>

<Hero
  classes={{ labelContainer: 'pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  image={{
    src: imgFescLondon,
    alt: 'Prof. Andrew Agbaje – Top Reviewer, ESC Congress 2024, London',
    objectPosition: 'top',
  }}
  imageText="Prof. Andrew Agbaje recognized as a Top Reviewer at ESC Congress, London 2024."
/>

<h2
  class="text-center text-2xl xl:text-[24px] xl:leading-[32px] font-bold text-gray-900 dark:text-white mb-6 xl:mb-[24px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
>
  Past Awards and Recognition
</h2>

<!-- Past Awards -->
<Features2
  classes={{ container: 'max-w-7xl xl:max-w-[1280px] mx-auto pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  columns={3}
  items={pastAwards.map((item) => ({
    icon: item.icon,
    title: item.title,
    description: `${item.subtitle}
                 ${item.details ? `<div class="text-base xl:text-[16px] xl:leading-[24px] text-primary mt-2 xl:mt-[8px]">${item.details}</div>` : ''}
                 ${item.location ? `<br /><br />${item.location}` : ''}`,
  }))}
/>

<h2
  class="text-center text-2xl xl:text-[24px] xl:leading-[32px] font-bold text-gray-900 dark:text-white mb-6 xl:mb-[24px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
>
  International Fellowships
</h2>

<!-- Fellowships and Positions -->
<Features5
  classes={{ container: 'max-w-7xl xl:max-w-[1280px] mx-auto pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  columns={1}
  image={{
    src: imgFESC,
    alt: 'Prof. Andrew Agbaje at FESC Induction, ExCeL London 2024',
  }}
  imageText="Prof. Andrew Agbaje at the FESC Induction Ceremony, ExCeL London 2024."
  isReversed
  items={fellowshipsAndPositions.map((item) => ({
    title: item.title,
    icon: item.icon,
    description: `${item.subtitle}
                 ${item.details ? `<div class="text-base xl:text-[16px] xl:leading-[24px] text-primary text-center mt-2 xl:mt-[8px]">${item.details}</div>` : ''}
                 ${item.date ? `<br /><br />${item.date}` : ''}`,
    classes: {
      title: 'text-center',
      description: 'text-center',
    },
  }))}
/>

<h2
  class="text-center text-2xl xl:text-[24px] xl:leading-[32px] font-bold text-gray-900 dark:text-white mb-6 xl:mb-[24px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
>
  Academic Achievements
</h2>

<!-- Academic Achievements -->
<Features5
  classes={{ container: 'max-w-7xl xl:max-w-[1280px] mx-auto pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  columns={2}
  image={{
    src: imgPortmourth,
    alt: 'Prof. Andrew Agbaje in academic regalia at PhD award ceremony, University of Portsmouth, UK.',
  }}
  imageText="Prof. Andrew Agbaje receives his PhD at the University of Portsmouth, UK, wearing traditional academic regalia."
  image2={{
    src: imgPortmourth2,
    alt: "Prof. Andrew Agbaje raises his hands in celebration during PhD award ceremony, declaring 'To God be the glory.'",
  }}
  imageText2="Agbaje walking up to receive his PhD, joyfully proclaiming, 'To God be the glory!'"
  items={academicAchievements.map((item) => ({
    icon: item.icon,
    title: item.title,
    description: `<div class="flex-1">${item.subtitle}
                 ${item.details ? `<div class="text-base xl:text-[16px] xl:leading-[24px] text-primary mt-2 xl:mt-[8px]">${item.details}</div>` : ''}
                 </div>
                 ${item.year ? `${item.year}` : ''}`,
  }))}
/>

<h2
  class="text-center text-2xl xl:text-[24px] xl:leading-[32px] font-bold text-gray-900 dark:text-white mb-6 xl:mb-[24px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
>
  Academic Unpaid Position
</h2>

<!-- Academic Achievements -->
<Features5
  classes={{ container: 'max-w-7xl xl:max-w-[1280px] mx-auto pt-0 md:pt-0 lg:pt-0 xl:pt-0' }}
  columns={1}
  image={{
    src: imgAndrew,
    alt: 'Prof. Andrew Agbaje standing outdoors at the University of Portsmouth.',
  }}
  imageText="Prof. Andrew Agbaje at the University of Portsmouth, UK."
  isReversed
  items={academicAppointments.map((item) => ({
    icon: item.icon,
    title: item.title,
    description: `<div class="flex-1">${item.subtitle}
                 ${item.details ? `<div class="text-base xl:text-[16px] xl:leading-[24px] text-primary mt-2 xl:mt-[8px]">${item.details}</div>` : ''}
                 </div>
                 ${item.year ? `${item.year}` : ''}`,
  }))}
/>

<!-- Biblical Quote Footer -->
<div
  class="max-w-4xl xl:max-w-[896px] mx-auto text-center mt-8 xl:mt-[32px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
>
  <p class="text-base xl:text-[16px] xl:leading-[24px] text-gray-700 dark:text-gray-300 italic">
    "And in all matters of wisdom and understanding, that the king enquired of them, he found them
    <GradientText class="font-bold">ten times better</GradientText>
    than all the magicians and astrologers that were in all his realm."
  </p>
  <p class="text-sm xl:text-[14px] xl:leading-[20px] text-gray-600 dark:text-gray-400 mt-2">— Daniel 1:20 KJV</p>
  <br />
  <p class="text-base xl:text-[16px] xl:leading-[24px] text-gray-700 dark:text-gray-300 italic">
    "Forasmuch as <GradientText class="font-bold">an excellent spirit</GradientText>, and knowledge, and understanding,
    interpreting of dreams, and shewing of hard sentences, and dissolving of doubts, were found in the same Daniel, whom
    the king named Belteshazzar: now let Daniel be called, and he will shew the interpretation."
  </p>
  <p class="text-sm xl:text-[14px] xl:leading-[20px] text-gray-600 dark:text-gray-400 mt-2">— Daniel 5:12 KJV</p>
  <br />
  <p class="text-base xl:text-[16px] xl:leading-[24px] text-gray-700 dark:text-gray-300 italic">
    "Agbaje is an active science communicator who is
    <GradientText class="font-bold">not afraid to challenge conventional views</GradientText> when doing so is backed up
    by his research. Agbaje remembers to always highlight the practical relevance of his research to both health care and
    the wider society. From the viewpoint of communications professionals, Agbaje is an ideal collaborator: he always reserves
    enough time for honing the text, and he is
    <GradientText class="font-bold">skilled at visualising even complex entities.</GradientText>"
  </p>
  <p class="text-sm xl:text-[14px] xl:leading-[20px] text-gray-600 dark:text-gray-400 mt-2">
    — University of Eastern Finland
  </p>
</div>

<!-- Graduation Video -->
<div
  class="max-w-4xl xl:max-w-[896px] mx-auto mt-12 xl:mt-[48px] mb-8 xl:mb-[32px] intersect-once intersect-tenth sm:intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade px-4 sm:px-6 lg:px-8"
>
  <div
    class="relative bg-gray-100 dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden cursor-pointer hover:scale-[1.02] hover:shadow-xl transform transition-all duration-300 ease-in-out group w-full max-w-3xl xl:max-w-[768px] mx-auto"
    id="videoContainer"
    tabindex="0"
  >
    <p
      class="absolute z-10 top-4 xl:top-[16px] left-4 xl:left-[16px] text-white font-medium px-3 xl:px-[12px] py-1.5 xl:py-[6px] text-lg xl:text-[18px] xl:leading-[28px]"
    >
      Graduation Clip
    </p>
    <div
      class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 hover:bg-opacity-20 transition-all duration-300"
      id="videoOverlay"
    >
      <svg
        class="w-16 h-16 xl:w-[24px] xl:h-[24px] text-white opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width={2}
          d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        ></path>
      </svg>
    </div>
    <video
      class="w-full aspect-video"
      preload="none"
      aria-label="Dr. Andrew Agbaje's graduation ceremony at Portsmouth"
      id="graduationVideo"
      data-src={`${ENDPOINTS.publicFiles}/graduation_clip_andrew_agbaje_portsmouth.mp4`}
    >
      Your browser does not support the video tag.
    </video>
  </div>
  <p class="pt-4 xl:pt-[16px] text-center text-sm xl:text-[14px] xl:leading-[20px] text-muted dark:text-slate-400">
    ’To God be the glory!’ proclaims Prof. Agbaje as he proudly accepts his degree.
  </p>
</div>

<Spacer size="sm" />

<script>
  const videoContainer = document.getElementById('videoContainer');
  const videoOverlay = document.getElementById('videoOverlay');
  const video = document.getElementById('graduationVideo') as HTMLVideoElement;

  function toggleVideo(event?: KeyboardEvent) {
    // Prevent space bar from scrolling the page
    if (event?.key === ' ') {
      event.preventDefault();
    }

    if (video?.paused) {
      video.play();
      if (videoOverlay) videoOverlay.style.display = 'none';
    } else if (video) {
      video.pause();
      if (videoOverlay) videoOverlay.style.display = 'flex';
    }
  }

  if (videoContainer && videoOverlay && video) {
    videoContainer.addEventListener('click', () => toggleVideo());

    video.addEventListener('pause', () => {
      videoOverlay.style.display = 'flex';
    });

    video.addEventListener('ended', () => {
      videoOverlay.style.display = 'flex';
    });

    // Handle keyboard interaction for the video container
    videoContainer.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.code === 'Space' || e.key === ' ') {
        e.preventDefault();
        toggleVideo(e);
      }
    });
  }

  function setUpVideo() {
    const videos = document.querySelectorAll('video.aspect-video[data-src]');

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const video = entry.target as HTMLVideoElement;
            const videoSrc = video.dataset.src;

            if (videoSrc && !video.src) {
              video.src = videoSrc;
              video.load(); // Ensure the video loads properly
            }

            observer.unobserve(video);
          }
        });
      },
      {
        rootMargin: '50px', // Start loading when video is 50px away from viewport
        threshold: 0.1, // Trigger when 10% of video is visible
      }
    );

    videos.forEach((video) => observer.observe(video));
  }

  // Delay the initialization by 1 second (1000ms)
  function initializeVideo() {
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(setUpVideo, 1000);
      });
    } else {
      setTimeout(setUpVideo, 1000);
    }
  }

  initializeVideo();
  document.addEventListener('astro:page-load', initializeVideo);
</script>

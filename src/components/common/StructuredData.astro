---
import logoUrl from '~/assets/images/index/urFIT Child Research Group Logo.webp';
import { getImage } from 'astro:assets';
import { SITE } from 'astrowind:config';

export interface Props {
  type?: 'index' | 'calculator';
}

const { type = 'index' } = Astro.props;

const optimizedLogo = await getImage({ src: logoUrl });

const organizationSchema = {
  '@context': 'https://schema.org',
  '@type': 'ResearchOrganization',
  '@id': SITE.site,
  name: 'urFIT-child Research Group',
  url: SITE.site,
  logo: {
    '@type': 'ImageObject',
    url: new URL(optimizedLogo.src, SITE.site).toString(),
    width: '640',
    height: '640',
  },
  description:
    'Official site of urFIT-child, led by Dr. Andrew Agbaje. Discover research on waist-to-height ratio, childhood obesity, and pediatric health diagnostics.',
};

const calculatorSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebApplication',
  name: 'Waist to Height Ratio Calculator',
  url: `${SITE.site}/waist-to-height-ratio-calculator`,
  applicationCategory: 'HealthApplication',
  operatingSystem: 'All',
  description:
    'Waist to height ratio calculator with visual and color-coded results. Based on the largest WHtR dataset to assess body fat and find your healthy range.',
  offers: {
    '@type': 'Offer',
    price: '0.00',
    priceCurrency: 'USD',
  },
  publisher: {
    '@type': 'ResearchOrganization',
    name: 'urFIT-child Research Group',
    url: SITE.site,
  },
};

const schema = type === 'calculator' ? calculatorSchema : organizationSchema;
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
